knitr::opts_chunk$set(echo = TRUE)
library(XML)
library(utils)
#List birds table
#birdtbl <- ("../data/birdAcronyme.csv")
parentDir <-dirname(getwd())
birdtbl <-file.path(parentDir,"data/birdAcronyme.csv")
bird <- read.csv(birdtbl, sep=",", header=TRUE,stringsAsFactors=FALSE)
gnDir <- file.path(parentDir,"GNmetadata/templateSpeciesDistribution/data/metadata")
gnVersion <-readLines(file(paste0(gnDir,"/metadata.xml")), warn=FALSE)
xml_update <- apply(bird,1,function(x) {
dirTo <- file.path(dirname(parentDir),"toGN/metadata/SpeciesDistribution")
species_updated <-gsub("XXXX",x[2],gnVersion)
xsname_updated <-gsub("SSSS",x[3],species_updated)
abbrev_updated <-gsub("AAAA",x[1],xsname_updated)
birdfl<-file(paste0(dirTo,"/",x[1],".xml"))
writeLines(abbrev_updated, birdfl)
close(birdfl)
})
parentDir <-dirname(getwd())
birdtbl <-file.path(parentDir,"data/birdAcronyme.csv")
bird <- read.csv(birdtbl, sep=",", header=TRUE,stringsAsFactors=FALSE)
gnDir <- file.path(parentDir,"GNmetadata/templateSpeciesDistribution/data/metadata")
gnVersion <-readLines(file(paste0(gnDir,"/metadata.xml")), warn=FALSE)
xml_update <- apply(bird,1,function(x) {
dirTo <- "/home/ubuntu/geonetwork/toGN/metadata/SpeciesDistribution"
species_updated <-gsub("XXXX",x[2],gnVersion)
xsname_updated <-gsub("SSSS",x[3],species_updated)
abbrev_updated <-gsub("AAAA",x[1],xsname_updated)
birdfl<-file(paste0(dirTo,"/",x[1],".xml"))
writeLines(abbrev_updated, birdfl)
close(birdfl)
})
close(birdtbl)
close(paste0(gnDir,"/metadata.xml"))
close(gnVersion)
library(XML)
library(utils)
#List birds table
#birdtbl <- ("../data/birdAcronyme.csv")
parentDir <-dirname(getwd())
birdtbl <-file.path(parentDir,"data/birdAcronyme.csv")
bird <- read.csv(birdtbl, sep=",", header=TRUE,stringsAsFactors=FALSE)
gnDir <- file.path(parentDir,"GNmetadata/templateSpeciesDistribution/data/metadata")
con <- file(paste0(gnDir,"/metadata.xml")
gnVersion <-readLines(con, warn=FALSE)
library(XML)
library(utils)
#List birds table
#birdtbl <- ("../data/birdAcronyme.csv")
parentDir <-dirname(getwd())
birdtbl <-file.path(parentDir,"data/birdAcronyme.csv")
bird <- read.csv(birdtbl, sep=",", header=TRUE,stringsAsFactors=FALSE)
gnDir <- file.path(parentDir,"GNmetadata/templateSpeciesDistribution/data/metadata")
con <- file(paste0(gnDir,"/metadata.xml")
gnVersion <-readLines(con, warn=FALSE)
parentDir <-dirname(getwd())
birdtbl <-file.path(parentDir,"data/birdAcronyme.csv")
bird <- read.csv(birdtbl, sep=",", header=TRUE,stringsAsFactors=FALSE)
gnDir <- file.path(parentDir,"GNmetadata/templateSpeciesDistribution/data/metadata")
con <- file(paste0(gnDir,"/metadata.xml"))
gnVersion <-readLines(con, warn=FALSE)
xml_update <- apply(bird,1,function(x) {
dirTo <- "/home/ubuntu/geonetwork/toGN/metadata/SpeciesDistribution"
species_updated <-gsub("XXXX",x[2],gnVersion)
xsname_updated <-gsub("SSSS",x[3],species_updated)
abbrev_updated <-gsub("AAAA",x[1],xsname_updated)
birdfl<-file(paste0(dirTo,"/",x[1],".xml"))
writeLines(abbrev_updated, birdfl)
close(birdfl)
})
close(con)
